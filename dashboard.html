<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>SEARCH ‚Äî Live Map</title>

  <!-- Leaflet dark tiles -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <link rel="stylesheet" href="styles.css"/>
  <script src="firebase-config.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="left">
      <div class="brand">SEARCH</div>
      <div id="mode-toggle" class="mode-toggle">
        <button id="toggle-pass" class="mode-btn">Passenger</button>
        <div class="switcher">|</div>
        <button id="toggle-drive" class="mode-btn">Driver</button>
      </div>
    </div>

    <div class="right">
      <div id="user-badge" class="user-badge">Guest</div>
      <a id="profile-link" href="profile.html" class="ghost">Profile</a>
      <a id="logout" href="index.html" class="ghost" title="Sign out">Sign out</a>
    </div>
  </header>

  <main class="app-shell">
    <aside id="control-panel" class="panel card">
      <div id="welcome-card">
        <h3 id="welcome-title">Welcome</h3>
        <p class="muted small" id="sub-welcome">Select your destination or go online</p>
      </div>

      <div id="authless-area" class="card small muted">
        Demo mode: no backend ‚Äî full UI testing.
      </div>

      <div id="controls" style="display:none">
        <label class="label">Mode</label>
        <div class="row">
          <button id="ui-mode-pass" class="chip">Passenger</button>
          <button id="ui-mode-drive" class="chip">Driver</button>
        </div>

        <label class="label" style="margin-top:12px">Where are you now?</label>
        <input id="pickup-input" placeholder="Tap locate or type pickup" />

        <label class="label" style="margin-top:12px">Where are you going?</label>
        <input id="dest-input" placeholder="Town, street, village..." />

        <div class="row" style="margin-top:10px">
          <button id="find-btn" class="primary">Find Drivers</button>
          <button id="fav-btn" class="ghost">Save</button>
        </div>

        <label class="label" style="margin-top:12px">Seats (driver)</label>
        <input id="seats-input" type="number" min="0" max="14" placeholder="Seats (0-14)" />

        <div style="margin-top:12px">
          <button id="publish-btn" class="primary full">Publish my location</button>
        </div>
      </div>

      <div id="driver-list-card" class="card" style="display:none;margin-top:12px">
        <div id="driver-list-title">Available drivers</div>
        <div id="drivers-list" class="drivers-list"></div>
      </div>

      <div style="margin-top:12px">
        <button id="panic" class="danger full">‚ö†Ô∏è SOS ‚Äî Panic</button>
      </div>

    </aside>

    <section id="map-area">
      <div id="map"></div>

      <div class="floating-controls">
        <button id="locate" class="circle">üìç</button>
        <button id="toggle-panel" class="circle">üß≠</button>
      </div>
    </section>
  </main>

  <footer class="footer muted">¬© Search ‚Ä¢ Demo Mode ‚Ä¢ Nigeria</footer>

  <!-- libs -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster-src.js"></script>

  <!-- our map & app -->
  <script src="map-logic.js"></script>
  <script src="app.js"></script>

  <script>
    // quick SW registration (if provided)
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js').catch(()=>{/*ignore*/});
    }
  </script>
</body>
</html>
